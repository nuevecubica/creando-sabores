extends ../layouts/default

include ../mixins/recipe

include ../mixins/header

block css
	link(href="/styles/site.min.css", rel="stylesheet")

	//- This file provides the default styling for the KeystoneJS Content Editor
	if user && user.canAccessKeystone
		link(href="/keystone/styles/content/editor.min.css", rel="stylesheet")

	//- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries
	//- Safely remove this block if you are not targeting IE8
	//-[if lt IE 9]
		script(src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js")
		script(src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js")
	//-[endif]

block js
	//- JAVASCRIPT
	script(src='/js/libs/jquery.min.js')
	script(src='/js/libs/jquery.address.js')
	script(src='/js/libs/semantic.js')

	script(src='/js/main.js')
	script(src='/js/recipe.js')

	//- The KeystoneJS Content Editor provides support for ks-editable data attributes,
	//- which generate links to edit content for users who can access Keystone
	if user && user.canAccessKeystone
		script(src='/keystone/js/content/editor.js')

block content

	+header(data.recipe, section)

	.ui.page.grid
		#recipe-content.ui.grid.segment
			.row
				#info.eleven.wide.column
					.ui.seven.column.grid.stackable
						.rating.column.five.wide
							- var rating = Math.floor(data.recipe.rating) || 0
							- var r = rating
							- for(var x = 0; x < 5; x++)
								if(r == 0)
									i.icon-chef-star.icon.off
								else
									i.icon-chef-star.icon.on
									- r = r - 1;

							.span= rating

						.difficulty.column.four.wide
							- var categories = [ __('Dummy'), __('Very easy') , __('Easy'), __('Normal'), __('Difficult'), __('Very difficult') ]
							- var difficulty = data.recipe.difficulty
							- var category = categories[difficulty]

							- for(var i = 0; i < 5; i++)
								if(difficulty == 0)
									i.icon-chef-tenedor.icon.off
								else
									i.icon-chef-tenedor.icon.on
									- difficulty = difficulty - 1;

							.span= category

						.time.column.three.wide
							i.icon-chef-time.icon
							.span= (data.recipe.time < 60) ? data.recipe.time + ' ' + __('min') : (data.recipe.time / 60).toFixed(2) + ' ' + __('h (hours)')

						.portions.column.two.wide
							i.icon-chef-porciones.icon
							.span= data.recipe.portions

						.favorite.column.one.wide
							i.icon-chef-heart.icon.checks


				#actions.five.wide.column.right.aligned

					.ui.button.chef.button-brick
						a= __('Add to menu')

			.row
				.sixteen.wide.column
					.explain
						.ui.content!= data.recipe.description

			.row
				.sixteen.wide.column
					h2.ui.header= __('Ingredients')
					.explain
						.ui.content= __('In case that you don\'t have enough ingredients [...]')

					.ui.button.chef.button-green
						a= __('Add to shopping basket')

				#ingredients.ui.grid
					.three.column.row.computer.only

						- var array = data.recipe.ingredients.split('<p>')
						.column
							- for(var j = 1; j < array.length; j+=3)
								.ingredient
									.icon-chef-cesta.checks
									.span!= array[j]
							.ingredient
								.icon-chef-cesta.checks.all
								.span= __('Select all')
						.column
							- for(var j = 2; j < array.length; j+=3)
								.ingredient
									.icon-chef-cesta.checks
									.span!= array[j]
						.column
							- for(var j = 3; j < array.length; j+=3)
								.ingredient
									.icon-chef-cesta.checks
									.span!= array[j]

					.two.column.row.tablet.only

						- var array = data.recipe.ingredients.split('<p>')
						.column
							- for(var j = 1; j < array.length; j+=2)
								.ingredient
									.icon-chef-cesta.checks
									.span!= array[j]
							.ingredient
								.icon-chef-cesta.checks.all
								.span= __('Select all')
						.column
							- for(var j = 2; j < array.length; j+=2)
								.ingredient
									.icon-chef-cesta.checks
									.span!= array[j]

					.sixteen.wide.column.mobile.only

						- var array = data.recipe.ingredients.split('<p>')
						.column
							- for(var j = 1; j < array.length; j+=1)
								.ingredient
									.icon-chef-cesta.checks
									.span!= array[j]
							.ingredient
								.icon-chef-cesta.checks.all
								.span= __('Select all')
			.sixteen.wide.column
				h2.ui.header= __('Procedure')
			#procedure.row
				.sixteen.wide.column
					#steps
						- var array = data.recipe.procedure.split('<p>')
						- for(var j = 1; j < array.length; j++)
							.step
								.icon-chef-tick.checks
								.ui.header= __('Step:') + ' ' + j
								.ui.content!= array[j]

