include ../mixins/flash-messages
include ../mixins/form-wrapper

- var bodyClasses = [];
block vars

doctype html
html

	//- HTML HEADER
	head
		meta(charset="utf-8")
		meta(name="viewport", content="width=device-width, initial-scale=1.0")
		meta(http-equiv="X-UA-Compatible" content="IE=edge")

		- var pageTitle = (title ? (title + ' - ') : '') + __('Chefcito title')
		title #{pageTitle}

		meta(http-equiv="Content-Type", content="text/html; charset=utf8")
		meta(name="lang", content="es")
		meta(name="description", content="#{__('Chefcito description')}")
		meta(property="og:title", content="#{__('Chefcito title')}")
		meta(property="og:description", content="#{__('Chefcito description')}")
		meta(property="og:url", content="#{site.url}")
		meta(property="og:type", content="website")
		meta(property="og:site_name", content="#{__('Chefcito title')}")
		//- meta(property="fb:admins", content="#{site.fb_admin}")
		//- meta(property="fb:app_id", content="#{site.fb_app_id}")
		meta(property="twitter:card", content="summary")
		meta(property="twitter:site", content="#{site.twitter}")

		link(href="/styles/site.css", rel="stylesheet")

		//- This file provides the default styling for the KeystoneJS Content Editor
		if user && user.canAccessKeystone
			link(href="/keystone/styles/content/editor.min.css", rel="stylesheet")
		//- Include template-specific stylesheets by extending the css block
		block css

		link(rel="shortcut icon", href="/favicon.ico", type="image/x-icon")

		script(src='/js/logger.js')

		block head

	//- HTML BODY
	body(class=bodyClasses).preload.ui.segment.grid

		//- Flash messages allow you to display once-off status messages to users, e.g. form
		//- validation errors, success messages, etc.
		+flash-messages(messages)


		if !user
			include ../components/modal-login

		//- This mixin evaluates if the type of page that is loading is form wrapped
		//- If content is own page will be form wrapped

		if own
			+form-wrapper(section, data)
		else
			block content

		if !hideSocial
			include ../components/social

		if !footerType || footerType === 'full'
			include ../components/footer
		else if footerType === 'mini'
			include ../components/footer-mini

		if !hideMenu
			include ../components/menu

		//- JAVASCRIPT
		if isTest
			script.
				Function.prototype.bind = Function.prototype.bind || function (thisp) {
					var fn = this;
					return function () {
						return fn.apply(thisp, arguments);
					};
				};

		//- Everything globally available goes inside this object!
		script.
			window.chef = !{JSON.stringify(chef)}
			window.chef.errorMessages = {}
			window.chef.errorMessages['Unknown error'] = "#{__('Error: Unknown error')}"
			window.chef.errorMessages['Unconfirmed user'] = "#{__('Please confirm your email to access this page')}"


		//- Load default scripts
		script(src='/js/libs/jquery.min.js')
		script(src='/js/libs/jquery.address.js')
		script(src='/js/libs/semantic.js')
		script(src='/js/libs/lodash.min.js')

		script(src='/js/libs/handlebars.min.js')
		script(src='/js/handlebars/helpers.js')
		script(src='/js/jquery.functions.js')

		script(src='/js/common.js')
		script(src='/js/editor/editor.js')
		script(src='/js/editor/editor.filters.js')
		script(src='/js/editor/editor.elements.js')
		script(src='/js/tutorial.js')

		//- Include template-specific javascript files by extending the js block
		block js

		//- The KeystoneJS Content Editor provides support for ks-editable data attributes,
		//- which generate links to edit content for users who can access Keystone
		if user && user.canAccessKeystone
			script(src='/keystone/js/content/editor.js')

		if env.NODE_ENV == 'development'
			include ../components/debug

		//
			#{env.NODE_ENV} / #{version} + #{ksversion} + #{process.version.substr(1)}
